## 3、循环结构

[上篇——Chapter3：2、分支结构](2、分支结构.md)

循环结构是实际项目中经常用到的流程控制结构，主要用来控制在满足循环条件的情况下反复执行某一段代码，这一段代码叫做循环体，常用的循环结构有以下几种：

1. for循环；
2. 增强for循环：foreach；
3. while循环；
4. do...while循环；

#### for循环：

先来一个最简单的示例感受一下：

```java
    public static void main(String[] args)
    {
        for (int i = 0; i < 5; i++)
        {
            System.out.println("这是第" + i + "次循环");
        }
    }
```

输出结果是：

```java
这是第0次循环
这是第1次循环
这是第2次循环
这是第3次循环
这是第4次循环
```

看上去很复杂，其实并没有，先看一下for循环的语法：

- int i = 0，为for循环赋予初始值；
- i < 5，循环条件；
- i++，自增，给变量i赋值；
- {循环体，如果只有一行可以省略大括号，一般不这么做}
- for循环表达式中的分号是不能缺少的

分析一下输出结果：

- 首先对变量i的值进行判断，发现满足条件<5，直接执行循环体；
- 执行完循环体，进行i++运算，再次判断变量值，此时，i = 1满足条件<5，执行循环体；
- 以上循环执行到i=5的时候，不满足循环，退出循环；
- 综上，我们可以看到for循环的执行顺序：初始化——判断条件——执行循环体——计算——判断条件，初始化的代码在循环中只执行一次。

升级一下复杂度，正好复习一下++的用法：

```java
for (int i = 0; i <= 5; i++)
    {
        System.out.println("这是第" + i++ + "次循环");
    }
```

分析一下代码：

- 首先，i = 0，判断 i <= 5，执行循环体打印，并进行 i++ 运算 ，执行打印：0；
- 对变量再次运算时，此时变量值已经是1，i++，判断时变量值2<=5满足条件，执行打印：2；
- 对变量再次运算时，此时变量值已经是3，i++，判断时变量值4<=5满足条件，执行打印：4；
- 再次运算时，此时变量值已经是3，i++，判断时变量值6<=5不满足条件，退出循环。

实际输出的结果是：

```java
这是第0次循环
这是第2次循环
这是第4次循环
```

#### foreach——增强for循环：

foreach是java5的新特性之一，在遍历数组、集合方面给开发者提供了很大的便利，下面的实例我们从一个最简单的数组说明一下foreach的语法结构：

```java
    public static void main(String[] args)
    {
        int[] ints = {1,3,5,7,9};
        //for (类型 变量： 遍历对象)
        for(int i: ints)
        {
            System.out.println(i);
        }
    }
```

输出结果是：1，3，5，7，9；

如果用改用for循环来写的话，就是这个样子，关于数组，后面还会进行深入分析。

```java
   for (int i = 0; i < ints.length; i++)
   {
       System.out.println(ints[i]);
   }
```

#### while循环：

while循环的语法很简单，继续用一个实例说明：

```java
public static void main(String[] args)
    {
        int i = 0;
        while (i < 5)
        {
            System.out.println("这是第" + i + "次循环");
            i++;
        }
    }
```

输出结果：

```java
这是第0次循环
这是第1次循环
这是第2次循环
这是第3次循环
这是第4次循环
```

需要注意的是：while循环一定要有保证循环条件变成false的时候，否则将会成为死循环，上例中如果没有i++控制，就会不停打印耗尽电脑性能。

#### do...while()循环：

do while循环与while循环的区别在于：while循环是先判断条件，如果满足条件再执行循环体，而do while循环则是先执行循环体再去判断循环条件，如果满足条件则再次循环，不满足则中止，如下：

```java
int j = 0;
    do {
        System.out.println("这是第" + j + "次循环");
        j++;
    }while(j < 5);
```

这段程序执行结果和while循环执行结果完全一致，可以看出，在do while循环中，无论是否满足条件，都至少会执行1次循环体，而while循环只要不满足则一次都不执行。

#### 嵌套循环：

升级难度了，上面我们执行的都是单个循环，但是在实际项目中嵌套循环也常会用到，上述4种循环都可以自由嵌套，先看一个实例，分析一下嵌套循环中代码的执行顺序；

```java
    public static void main(String[] args)
    {
      	//外层循环
        for (int i = 0; i < 2; i++)
        {
          	//内层循环
            for (int j = 0; j < 3; j++)
            {
                System.out.println("i的值为：" + i + "；j的值为：" + j);
            }
        }
    }
```

分析一下：

- 首先执行外层循环，满足条件，进入循环体，执行内层循环，满足条件得到：i = 0， j = 0；
- 内层结束，计算变量j，判断<3满足条件，继续执行打印：i = 0， j = 1；
- 再次计算，变量j = 2，满足条件<3，打印结果：i = 0， j = 2；
- 再次计算，变量j = 3，不满足条件结束循环进如外层，此时，对变量i进行计算得到，判断i = 1 < 2满足条件，执行循环体，重新执行内层循环，打印结果：i = 1，j = 0；
- 此时重复上述步骤，直到内层循环不满足条件退出，此时外层循环判断后也不满足条件，退出全部循环。

输出结果：

```java
i的值为：0；j的值为：0
i的值为：0；j的值为：1
i的值为：0；j的值为：2
i的值为：1；j的值为：0
i的值为：1；j的值为：1
i的值为：1；j的值为：2
```

由此可见，当发生嵌套循环时，如果满足外层循环条件则执行内层，此时内层循环体需要反复执行直到结束再进入外层循环，只有当外层循环不满足条件时才能真正退出嵌套循环，这样我们就可以得到嵌套循环执行总次数：如果外层执行m次，内层执行n次，那么总共会执行m*n次。

#### 循环控制：

说了这么多循环，怎么更好更主动地控制循环呢？比如说我们有一个循环，要在满足某一个条件时进行某个操作，此时我们就可以用到循环控制了，java中主要使用的循环控制有break、continue和return关键字

**break**

break用于完全结束一个循环，跳出循环体，拿上面嵌套循环举例：

```java
        for (int i = 0; i < 2; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                System.out.println("i的值为：" + i + "；j的值为：" + j);
                break;
            }
        }
```

首先执行外层循环，满足条件进入循环体，执行内层循环，进入内层循环体，打印i = 0， j = 0，执行break退出内层循环进入外层，再次执行，打印i = 1， j = 0，退出内层，此时外层循环也不满足，退出全部循环；

**continue**

不同于break，continue用于结束本次循环,，不再执行后面代码，再开始下一次循环，而不是完全结束一个循环，如下：

```java
        for (int i = 0; i < 3; i++)
        {
            if (i == 1)
            {
                continue;
            }
            System.out.println("这是第" + i + "次循环！");
        }
```

输出结果：

```java
这是第0次循环！
这是第2次循环！
```

可以看出，当变量值为1的时候，结束了当前循环，所以没有打印值为1的循环，如果是break的话，则在满足条件的时候会完全退出循环。

**return**

return不止用于循环中，单独使用return可以结束一个方法，比如在嵌套循环中遇到了return，不过有多少层嵌套都会完全退出所有的循环，实例如下：

```java
        for (int i = 0; i < 2; i++)
        {
            for (int j = 0; j < 3; j++)
            {
                System.out.println("i的值为：" + i + "；j的值为：" + j);
                return;
            }
        }
```

上面实例，只会输出i = 0， j = 0的结果，因为在执行完第一次打印之后碰到了return，便直接结束了所有的循环，在方法中关于return的使用还会说明。

[本节代码路径](https://github.com/wmhou/java_blog/tree/master/JavaSE/JavaCode/src/com/wmhou/chapter3)

[下篇——Chapter4：1、数组](https://github.com/wmhou/java_blog/blob/master/JavaSE/Chapter4%20%E6%95%B0%E7%BB%84/1%E3%80%81%E6%95%B0%E7%BB%84.md)